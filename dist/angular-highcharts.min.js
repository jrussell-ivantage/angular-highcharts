angular.module("hc",[]),angular.module("hc").directive("highchart",["HighchartsConstructor","hcOptions",function(a,b){"use strict";return{restrict:"EA",template:['<div class="hc-chart">','<div class="hc-chart-loading"></div>',"</div>"].join(""),link:function(c,d,e){var f=[];angular.forEach(e,function(a,b){if(0===b.indexOf("hc")&&b.length>2&&a){var c=e.$attr[b].replace(/^((data|x)-)?hc[:-]/,"").split("-");f.push({attr:b,path:c,pathDepth:c.length,val:a})}}),f.sort(function(a,b){return a.pathDepth===b.pathDepth?0:a.pathDepth<b.pathDepth?-1:1});var g=function(a){a=angular.copy(a);var e=a.length&&0===a[0].pathDepth?c.$eval(a.shift()):{};return angular.forEach(a,function(a){var b,d,e,f=this;for(b=0;b<a.pathDepth;b++){if(d=a.path[b],/(\w+)\[(\d+)\]$/.exec(d)){for(d=RegExp.$1,e=+RegExp.$2,f[d]=f[d]||[];f[d].length>e;)f[d].push({});f=f[d],d=e}f[d]=b===a.pathDepth-1?c.$eval(a.val):f[d]||{},f=f[d]}}.bind(e)),e=angular.extend(b.get(),e),e.chart=e.chart||{},e.chart.renderTo=d[0],e},h=new a.Chart(g(f));angular.forEach(f,function(b){c.$watch(b.val,function(d){if(d){if(0===b.pathDepth)h.destroy(),h=new a.Chart(g(f));else{var e,i,j=h.options;for(e=0;e<b.pathDepth;e++)i=b.path[e],/(\w+)\[(\d+)\]$/.exec(i)?e===b.pathDepth-1?j[RegExp.$1][RegExp.$2]=c.$eval(b.val):j=j[RegExp.$1][+RegExp.$2]:e===b.pathDepth-1?j[i]=c.$eval(b.val):j=j[i]}h=new Highcharts.Chart(h.options)}},!0)})}}}]),angular.module("hc").provider("HighchartsConstructor",function(){"use strict";var a=window.Highcharts;this.use=function(b){a=b},this.$get=function(){return a}}),angular.module("hc").provider("hcOptions",function(){"use strict";var a={};this.set=function(b){angular.extend(a,b)},this.$get=function(){return{get:function(){return angular.copy(a)}}}});